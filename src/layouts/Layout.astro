---
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { ViewTransitions } from "astro:transitions";
import "../styles/global.css";
---

<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>Astro Basics</title>
    <ViewTransitions />
  </head>
  <body
    class="flex flex-col min-h-full text-text-base bg-gradient-to-b from-bg-base from-60% to-bg-gradient-end"
  >
    <Header />
    <main class="container mx-auto p-6 flex-grow flex flex-col justify-center">
      <slot />
    </main>
    <Footer />
  </body>
</html>

<style is:global>
  /* Slow down all view transitions */
  ::view-transition {
    animation-duration: 1s;
  }

  /* --- Start: Header username fade transition --- */
  /* Disable default Astro animation for header-user-name */
  ::view-transition-group(header-user-name) {
    animation-name: none;
  }

  /* Define custom fade-in/out */
  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes fade-out {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  /* Apply fade and prevent transform */
  ::view-transition-old(header-user-name) {
    animation: 0.4s ease-in-out forwards fade-out;
    transform: none;
  }

  ::view-transition-new(header-user-name) {
    animation: 0.4s ease-in-out forwards fade-in;
    transform: none;
  }
  /* --- End: Header username fade transition --- */

  /* Optional: You could also adjust the easing function if desired */
  /*
  ::view-transition-group(user-name) {
    animation-timing-function: ease-in-out;
  }
  */
</style>
